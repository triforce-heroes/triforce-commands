import{Entries as t}from"./entries/Entries.js";import{EntryText as i}from"./entries/EntryText.js";export class CommandsBuilder{constructor(t,i){this.inEntries=[],this.inOffset=0,this.inAdvance=0,this.input=t,this.advancer=i}get entries(){return this.pushAdvanced(),new t(this.inEntries)}get offset(){return this.inOffset+this.inAdvance}push(t){this.pushAdvanced(),this.inEntries.push(t),this.inOffset+=t.length}advance(){if(void 0===this.advancer){this.inAdvance++;return}let t=this.advancer(this.input,this.offset);this.inAdvance=-1===t?this.input.length-this.offset:t-this.offset}pushAdvanced(){if(0===this.inAdvance)return;let t=this.input.slice(this.inOffset,this.offset);this.inAdvance=0,this.push(new i(t))}}