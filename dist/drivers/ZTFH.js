import{BufferConsumer as e}from"@triforce-heroes/triforce-core/BufferConsumer";import{CommandsMatcher as r}from"../CommandsMatcher.js";import{Driver as t}from"../Driver.js";import{EntryCommandDefined as n}from"../entries/EntryCommandDefined.js";let o=/[\u000E\uE000-\uEFFF]/u,i=new r(e=>o.test(e),(e,r)=>{let t=o.exec(e.slice(r));return null===t?-1:t.index+r});i.addExpression(/[\uE000-\uEFFF]/),i.addExpression(/\u000E..(.)/u,e=>e[1].codePointAt(0)/2),i.addFailureLiteral("\x0e");export const ZTFH=new t("ZTFH",e=>i.match(e),r=>{if(1===r.length)return new n(r,{type:65535,subtype:0,attributes:[r.codePointAt(0)]});let t=new e(Buffer.from(r),1),o=t.readUnsignedInt8(),i=t.readUnsignedInt8(),u=[],s=Buffer.from(r.slice(4),"utf16le");for(let e=0;e<s.length;e+=2)u.push(s.readUInt16LE(e));return new n(r,{type:o,subtype:i,attributes:u})});